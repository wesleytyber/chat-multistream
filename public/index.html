<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Chat Dashboard by Kalzan</title>
    <link rel="icon" type="image/png" href="/assets/favicon.png">
    <link rel="stylesheet" href="/css/multichat.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9547769843872493"
        crossorigin="anonymous"></script>
    <meta name="google-adsense-account" content="ca-pub-9547769843872493">
</head>

<body>
    <div class="app-wrapper">

        <div class="app-header-container">
            <h1 class="app-title">
                <span class="icon">üåê</span>
                <span class="main">Multi Chat</span>
                <span class="subtitle">‚Äî Modera√ß√£o e Visualiza√ß√£o</span>
            </h1>

            <!-- An√∫ncio no header -->
            <div class="header-ad">
                <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9547769843872493"
                    data-ad-slot="1234567890" data-ad-format="horizontal" data-full-width-responsive="true"></ins>
            </div>
        </div>

        <div class="chat-area" id="chatArea">
            <div id="no-chat-placeholder">
                <h1 class="emptyTitle">Nenhum chat adicionado ainda.</h1>
                <span class="emptySubtitle">Use o painel √† direita para ativar Twitch, YouTube ou Kick.</span>
                <button id="openPanelBtn">Adicionar chat</button>
            </div>
        </div>

        <!-- Main container: chats + painel -->
        <div class="app-container">
            <div class="config-panel" id="configPanel">
                <h2>Configura√ß√£o de chats</h2>
                <div class="chat-config">
                    <!-- Twitch SVG -->
                    <img class="twitch-icon"
                        src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Twitch_logo_2019.svg/1024px-Twitch_logo_2019.svg.png?20200326164935"
                        alt="Twitch">
                    <input type="text" id="twitchUser" placeholder="Nome do canal">
                    <label>
                        <input type="checkbox" id="twitchToggle">
                        <span id="twitchLabel">Ativar Twitch</span>
                    </label>
                </div>
                <div class="chat-config">
                    <!-- Kick SVG (verde) -->
                    <img class="kick-icon" src="https://kick.com/img/kick-logo.svg" alt="Kick Logo">
                    <input type="text" id="kickUser" placeholder="Nome do canal">
                    <label>
                        <input type="checkbox" id="kickToggle">
                        <span id="kickLabel">Ativar Kick</span>
                    </label>
                </div>
                <div class="chat-config">
                    <!-- YouTube -->
                    <img class="youtube-icon"
                        src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/YouTube_dark_logo_2017.svg/640px-YouTube_dark_logo_2017.svg.png"
                        alt="YouTube">
                    <input type="text" id="youtubeUser" placeholder="ID da live">
                    <label>
                        <input type="checkbox" id="youtubeToggle">
                        <span id="youtubeLabel">Ativar YouTube</span>
                    </label>
                </div>
                <div class="chat-config">
                    <!-- TikTok SVG -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 118 30" alt="TikTok"
                        height="30" width="118" class="tiktok-icon">
                        <path fill="#25F4EE"
                            d="M9.875 11.842v-1.119A9 9 0 0 0 8.7 10.64c-4.797-.006-8.7 3.9-8.7 8.708a8.7 8.7 0 0 0 3.718 7.134A8.68 8.68 0 0 1 1.38 20.55c0-4.737 3.794-8.598 8.495-8.707">
                        </path>
                        <path fill="#25F4EE"
                            d="M10.087 24.526c2.14 0 3.89-1.707 3.966-3.83l.007-18.968h3.462a7 7 0 0 1-.109-1.202h-4.727l-.006 18.968a3.98 3.98 0 0 1-3.967 3.83 3.9 3.9 0 0 1-1.846-.46 3.95 3.95 0 0 0 3.22 1.662m13.905-16.36V7.111a6.5 6.5 0 0 1-3.584-1.067 6.57 6.57 0 0 0 3.584 2.122">
                        </path>
                        <path fill="#FE2C55"
                            d="M20.41 6.044a6.54 6.54 0 0 1-1.617-4.316h-1.265a6.56 6.56 0 0 0 2.881 4.316M8.707 15.365a3.98 3.98 0 0 0-3.974 3.976c0 1.528.87 2.858 2.134 3.523a3.94 3.94 0 0 1-.754-2.321 3.98 3.98 0 0 1 3.973-3.976c.41 0 .805.07 1.176.185v-4.833a9 9 0 0 0-1.176-.083c-.07 0-.134.006-.204.006v3.708a4 4 0 0 0-1.175-.185">
                        </path>
                        <path fill="#FE2C55"
                            d="M23.992 8.166v3.676a11.25 11.25 0 0 1-6.579-2.116v9.622c0 4.8-3.903 8.713-8.706 8.713a8.67 8.67 0 0 1-4.99-1.579 8.7 8.7 0 0 0 6.37 2.781c4.797 0 8.706-3.906 8.706-8.714v-9.621a11.25 11.25 0 0 0 6.579 2.116v-4.73q-.718-.002-1.38-.148">
                        </path>
                        <path fill="#fff"
                            d="M17.413 19.348V9.726a11.25 11.25 0 0 0 6.58 2.116V8.166a6.57 6.57 0 0 1-3.584-2.122 6.6 6.6 0 0 1-2.887-4.316h-3.463l-.006 18.968a3.98 3.98 0 0 1-3.967 3.83 3.99 3.99 0 0 1-3.225-1.656 3.99 3.99 0 0 1-2.134-3.523A3.98 3.98 0 0 1 8.7 15.372c.409 0 .805.07 1.176.185v-3.708c-4.702.103-8.496 3.964-8.496 8.701 0 2.29.888 4.373 2.338 5.933a8.67 8.67 0 0 0 4.989 1.58c4.797 0 8.706-3.913 8.706-8.715M30.048 8.179h14.775l-1.355 4.232h-3.832v15.644h-4.778V12.41l-4.804.006zm38.984 0h15.12l-1.354 4.232h-4.172v15.644h-4.784V12.41l-4.803.006zM45.73 14.502h4.733v13.553h-4.708zm6.617-6.374h4.733v9.257l4.689-4.61h5.647l-5.934 5.76 6.643 9.52h-5.213l-4.433-6.598-1.405 1.362v5.236h-4.733V8.128zm50.143 0h4.734v9.257l4.688-4.61h5.647l-5.934 5.76 6.643 9.52h-5.206l-4.433-6.598-1.405 1.362v5.236h-4.734zm-54.396 4.826a2.384 2.384 0 1 0-.002-4.771 2.384 2.384 0 0 0 .002 4.771">
                        </path>
                        <path fill="#25F4EE"
                            d="M83.545 19.942a8.11 8.11 0 0 1 7.473-8.087 9 9 0 0 0-.709-.026c-4.478 0-8.106 3.631-8.106 8.113s3.628 8.113 8.106 8.113c.21 0 .498-.013.71-.026-4.178-.326-7.475-3.823-7.475-8.087">
                        </path>
                        <path fill="#FE2C55"
                            d="M92.858 11.83c-.217 0-.505.012-.715.025a8.11 8.11 0 0 1 7.467 8.087 8.11 8.11 0 0 1-7.467 8.087c.21.02.498.026.715.026 4.478 0 8.106-3.631 8.106-8.113s-3.628-8.113-8.106-8.113">
                        </path>
                        <path fill="#fff"
                            d="M91.58 23.887a3.94 3.94 0 0 1-3.94-3.945 3.94 3.94 0 1 1 7.882 0c0 2.18-1.77 3.945-3.941 3.945m0-12.058c-4.477 0-8.105 3.631-8.105 8.113s3.628 8.113 8.106 8.113 8.106-3.631 8.106-8.113-3.629-8.113-8.106-8.113">
                        </path>
                    </svg>
                    <input type="text" id="tiktokUser" placeholder="Indispon√≠vel no momento" disabled>
                    <label>
                        <input type="checkbox" id="tiktokToggle">
                        <span id="tiktokLabel">Ativar TikTok</span>
                    </label>
                </div>
            </div>
        </div>

        <!-- Bot√£o fora do header e depois do painel -->
        <button class="menu-toggle" id="togglePanelBtn">‚öôÔ∏è</button>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-text">Developed by Kalzan 2025</div>
            <div class="social-links">
                <button id="donateBtn" class="donate-button">üí∞ Donate</button>
                <a href="https://instagram.com/wesleyczans" target="_blank"><img class="social-icons"
                        src="/assets/instagram.png" alt="instagram"></a>
                <a href="https://youtube.com/@k4lzan" target="_blank"><img class="social-icons"
                        src="/assets/youtube.png" alt="youtube"></a>
                <a href="https://twitch.tv/k4lzan" target="_blank"><img class="social-icons"
                        src="/assets/twitch-white.png" alt="twitch"></a>
            </div>
        </footer>

        <!-- Modal Donate -->
        <div id="donateModal" class="modal">
            <div class="modal-content">
                <span class="close" id="closeBtn">‚ùå</span>
                <h2>Fa√ßa uma doa√ß√£o via LivePix</h2>

                <!-- Widget LivePix -->
                <iframe src="https://widget.livepix.gg/embed/5fa15866-6327-4c22-9dcf-05b5bddfbf05" width="300"
                    height="400" frameborder="0" allowtransparency="true" scrolling="no">
                </iframe>

                <p>Ou direto pelo banco usando a Chave Pix: <strong id="pixKey"></strong></p>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <!-- Script oficial do Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>(adsbygoogle = window.adsbygoogle);</script>
    <script>
        const socket = io();
        const chatArea = document.getElementById('chatArea');
        const twitchIcon = '<img class="twitch-icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ce/Twitch_logo_2019.svg/1024px-Twitch_logo_2019.svg.png?20200326164935" alt="Twitch">';
        const kickIcon = '<img class="kick-icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Kick_logo.svg/1599px-Kick_logo.svg.png?20230628205512" alt="Kick">';
        const youtubeIcon = '<img class="youtube-icon" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/YouTube_dark_logo_2017.svg/640px-YouTube_dark_logo_2017.svg.png" alt="Youtube">';
        const tiktokIcon = `
<svg xmlns="http://www.w3.org/2000/svg" 
     fill="currentColor" 
     viewBox="0 0 118 30" 
     height="42" 
     preserveAspectRatio="xMidYMid meet"
     class="tiktok-icon">
  <path fill="#25F4EE" d="M9.875 11.842v-1.119A9 9 0 0 0 8.7 10.64c-4.797-.006-8.7 3.9-8.7 8.708a8.7 8.7 0 0 0 3.718 7.134A8.68 8.68 0 0 1 1.38 20.55c0-4.737 3.794-8.598 8.495-8.707"/>
  <path fill="#25F4EE" d="M10.087 24.526c2.14 0 3.89-1.707 3.966-3.83l.007-18.968h3.462a7 7 0 0 1-.109-1.202h-4.727l-.006 18.968a3.98 3.98 0 0 1-3.967 3.83 3.9 3.9 0 0 1-1.846-.46 3.95 3.95 0 0 0 3.22 1.662"/>
  <path fill="#FE2C55" d="M20.41 6.044a6.54 6.54 0 0 1-1.617-4.316h-1.265a6.56 6.56 0 0 0 2.881 4.316M8.707 15.365a3.98 3.98 0 0 0-3.974 3.976c0 1.528.87 2.858 2.134 3.523a3.94 3.94 0 0 1-.754-2.321 3.98 3.98 0 0 1 3.973-3.976c.41 0 .805.07 1.176.185v-4.833a9 9 0 0 0-1.176-.083c-.07 0-.134.006-.204.006v3.708a4 4 0 0 0-1.175-.185">
                        </path>
                        <path fill="#FE2C55"
                            d="M23.992 8.166v3.676a11.25 11.25 0 0 1-6.579-2.116v9.622c0 4.8-3.903 8.713-8.706 8.713a8.67 8.67 0 0 1-4.99-1.579 8.7 8.7 0 0 0 6.37 2.781c4.797 0 8.706-3.906 8.706-8.714v-9.621a11.25 11.25 0 0 0 6.579 2.116v-4.73q-.718-.002-1.38-.148">
                        </path>
                        <path fill="#fff"
                            d="M17.413 19.348V9.726a11.25 11.25 0 0 0 6.58 2.116V8.166a6.57 6.57 0 0 1-3.584-2.122 6.6 6.6 0 0 1-2.887-4.316h-3.463l-.006 18.968a3.98 3.98 0 0 1-3.967 3.83 3.99 3.99 0 0 1-3.225-1.656 3.99 3.99 0 0 1-2.134-3.523A3.98 3.98 0 0 1 8.7 15.372c.409 0 .805.07 1.176.185v-3.708c-4.702.103-8.496 3.964-8.496 8.701 0 2.29.888 4.373 2.338 5.933a8.67 8.67 0 0 0 4.989 1.58c4.797 0 8.706-3.913 8.706-8.715M30.048 8.179h14.775l-1.355 4.232h-3.832v15.644h-4.778V12.41l-4.804.006zm38.984 0h15.12l-1.354 4.232h-4.172v15.644h-4.784V12.41l-4.803.006zM45.73 14.502h4.733v13.553h-4.708zm6.617-6.374h4.733v9.257l4.689-4.61h5.647l-5.934 5.76 6.643 9.52h-5.213l-4.433-6.598-1.405 1.362v5.236h-4.733V8.128zm50.143 0h4.734v9.257l4.688-4.61h5.647l-5.934 5.76 6.643 9.52h-5.206l-4.433-6.598-1.405 1.362v5.236h-4.734zm-54.396 4.826a2.384 2.384 0 1 0-.002-4.771 2.384 2.384 0 0 0 .002 4.771">
                        </path>
                        <path fill="#25F4EE"
                            d="M83.545 19.942a8.11 8.11 0 0 1 7.473-8.087 9 9 0 0 0-.709-.026c-4.478 0-8.106 3.631-8.106 8.113s3.628 8.113 8.106 8.113c.21 0 .498-.013.71-.026-4.178-.326-7.475-3.823-7.475-8.087">
                        </path>
                        <path fill="#FE2C55"
                            d="M92.858 11.83c-.217 0-.505.012-.715.025a8.11 8.11 0 0 1 7.467 8.087 8.11 8.11 0 0 1-7.467 8.087c.21.02.498.026.715.026 4.478 0 8.106-3.631 8.106-8.113s-3.628-8.113-8.106-8.113">
                        </path>
                        <path fill="#fff"
                            d="M91.58 23.887a3.94 3.94 0 0 1-3.94-3.945 3.94 3.94 0 1 1 7.882 0c0 2.18-1.77 3.945-3.941 3.945m0-12.058c-4.477 0-8.105 3.631-8.105 8.113s3.628 8.113 8.106 8.113 8.106-3.631 8.106-8.113-3.629-8.113-8.106-8.113">
                        </path>
</svg>
`;

        function handleChat(platform) {
            const input = document.getElementById(platform + 'User');
            const toggle = document.getElementById(platform + 'Toggle');
            const value = input.value.trim();
            if (!value) return alert("Digite o nome do canal!");

            let existing = document.getElementById(platform + 'Wrapper');

            if (toggle.checked) {
                if (!existing) {
                    const wrapper = document.createElement('div');
                    wrapper.className = 'chat-wrapper';
                    wrapper.id = platform + 'Wrapper';

                    const header = document.createElement('div');
                    header.className = 'chat-header';
                    let icon = '';
                    if (platform === 'twitch') icon = twitchIcon;
                    if (platform === 'kick') icon = kickIcon;
                    if (platform === 'youtube') icon = youtubeIcon;
                    if (platform === 'tiktok') icon = tiktokIcon;
                    header.innerHTML = `${icon} - ${value}`;

                    const chatDiv = document.createElement('div');
                    chatDiv.id = platform + 'Chat';
                    chatDiv.className = 'chat-messages';

                    wrapper.appendChild(header);
                    wrapper.appendChild(chatDiv);

                    // cria iframe
                    const iframe = document.createElement('iframe');
                    iframe.id = platform + 'Chat';
                    iframe.setAttribute('frameborder', '0');

                    if (platform === 'twitch') {
                        iframe.src = `https://www.twitch.tv/embed/${value}/chat?darkpopout&parent=kalzan.com&parent=chat-multistream.onrender.com`;
                    }

                    wrapper.appendChild(iframe);
                    if (platform === 'kick') {
                        iframe.src = `https://kick.com/popout/${value}/chat`;
                    }

                    if (platform === 'youtube') {
                        iframe.src = `https://www.youtube.com/live_chat?v=${value}&embed_domain=kalzan.com&embed_domain=chat-multistream.onrender.com`;
                    }

                    if (platform === 'tiktok') {
                        iframe.src = `https://www.tiktok.com/@${value}/live?enter_from_merge=pc_share&enter_method=pc_share&is_from_webapp=1&sender_device=pc`;
                    }

                    chatArea.appendChild(wrapper);

                    // remove placeholder de empty chat
                    const emptyChat = document.getElementById('no-chat-placeholder');
                    if (emptyChat) emptyChat.remove();
                }
            } else {
                if (existing) existing.remove();

                const anyChatLeft = chatArea.querySelector('.chat-wrapper');
                if (!anyChatLeft) {
                    const placeholder = document.createElement('div');
                    placeholder.id = 'no-chat-placeholder';

                    placeholder.innerHTML = `
        <h1 class="emptyTitle">Nenhum chat adicionado ainda.</h1>
        <span class="emptySubtitle">Use o painel √† direita para ativar Twitch, YouTube ou Kick.</span>
        <button id="openPanelBtn">Adicionar chat</button>
    `;
                    chatArea.appendChild(placeholder);

                    // adiciona listener ao bot√£o criado dinamicamente
                    const openPanelBtn = document.getElementById('openPanelBtn');
                    openPanelBtn.addEventListener('click', () => {
                        // aqui voc√™ pode abrir o painel ou disparar a fun√ß√£o que quiser
                        togglePanel(); // ou sua fun√ß√£o de abrir painel
                    });
                }
            }
        }

        ['twitch', 'kick', 'youtube', 'tiktok'].forEach(platform => {
            document.getElementById(platform + 'Toggle').addEventListener('change', () => handleChat(platform));
        });

        // ----------------- ABRIR O MENU LATERAL -----------------
        const configPanel = document.getElementById('configPanel');
        const togglePanelBtn = document.getElementById('togglePanelBtn');
        let menuOpen = true;

        function togglePanel() {
            configPanel.classList.toggle('show');
            menuOpen = !menuOpen;
            togglePanelBtn.textContent = menuOpen ? '‚öôÔ∏è' : '‚ùå';
            togglePanelBtn.style.transform = configPanel.classList.contains('show') ? 'translateX(-300px)' : 'translateX(0)';
        }

        togglePanelBtn.addEventListener('click', togglePanel);
        openPanelBtn.addEventListener('click', togglePanel);
        
        // ----------------- ATIVAR E DESATIVAR CHAT NO MENU LATERAL -----------------
        const toggles = [
            { id: "twitchToggle", label: "twitchLabel", name: "Twitch" },
            { id: "kickToggle", label: "kickLabel", name: "Kick" },
            { id: "youtubeToggle", label: "youtubeLabel", name: "YouTube" },
            { id: "tiktokToggle", label: "tiktokLabel", name: "TikTok" }
        ];

        toggles.forEach(({ id, label, name }) => {
            const checkbox = document.getElementById(id);
            const span = document.getElementById(label);

            if (!checkbox || !span) return;

            const updateToggle = () => {
                span.textContent = checkbox.checked ? `Desativar ${name}` : `Ativar ${name}`;
                checkbox.style.backgroundColor = checkbox.checked ? "rgba(0, 128, 0, 0.5)" : "rgba(255, 0, 0, 0.5)"; // verde e vermelho com opacidade 0.5
            };

            updateToggle();
            checkbox.addEventListener("change", updateToggle);
        });

        // ----------------- DONATE -----------------
        const donateBtn = document.getElementById('donateBtn');
        const donateModal = document.getElementById('donateModal');
        const closeBtn = document.getElementById('closeBtn');
        const pixQr = document.getElementById('pixQr');
        const pixKeyElement = document.getElementById('pixKey');
        const pixKey = "f91c3c69-0a2e-40cc-89ed-7c452314de7a";

        donateBtn.onclick = () => {
            donateModal.style.display = "flex";
            pixKeyElement.textContent = pixKey;
            pixQr.innerHTML = "";
            new QRCode(pixQr, { text: pixKey, width: 220, height: 220 });
        };

        closeBtn.onclick = () => donateModal.style.display = "none";

        window.onclick = (e) => { if (e.target == donateModal) donateModal.style.display = "none"; };

    </script>
</body>

</html>